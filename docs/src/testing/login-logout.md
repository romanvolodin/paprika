# Вход/выход пользователей из Паприки

## 1. Введение

Этот документ применим к веб-интерфейсу Паприки и охватывает все аспекты функциональности аутентификации, включая обработку различных сценариев входа и выхода из системы.

## 2. Предварительные условия

### Требования к тестовой среде

- Современный веб-браузер (Chrome, Firefox, Safari или Edge)
- Доступ к тестовой версии Паприки
- Стабильное интернет-соединение

### Необходимые учетные данные

Для тестирования требуются следующие типы учетных записей:

- Активный пользователь с правильными учетными данными
- Пользователь с неактивным статусом
- Учетные данные с неверным email
- Учетные данные с неверным паролем

## 3. Тест-кейсы для процесса логина

### Успешный вход в систему

1. Открыть страницу входа в Паприку
2. Ввести корректный email активного пользователя
3. Ввести корректный пароль
4. Нажать кнопку "Войти"

Ожидаемый результат: Пользователь успешно входит в систему и перенаправляется на главную страницу или на страницу, сохраненную перед входом.

### Вход с неверным email

1. Открыть страницу входа в Паприку
2. Ввести некорректный email (например, несуществующий)
3. Ввести корректный пароль
4. Нажать кнопку "Войти"

Ожидаемый результат: Отображается сообщение об ошибке "Неверный email или пароль", вход в систему не происходит.

### Вход с неверным паролем

1. Открыть страницу входа в Паприку
2. Ввести корректный email активного пользователя
3. Ввести некорректный пароль
4. Нажать кнопку "Войти"

Ожидаемый результат: Отображается сообщение об ошибке "Неверный email или пароль", вход в систему не происходит.

### Вход с пустыми полями

1. Открыть страницу входа в Паприку
2. Оставить поля email и пароля пустыми
3. Нажать кнопку "Войти"

Ожидаемый результат: Отображаются сообщения браузера о необходимости заполнить обязательные поля, отправка формы не происходит.

### Вход с неактивным пользователем

1. Открыть страницу входа в Паприку
2. Ввести email пользователя со статусом "неактивный"
3. Ввести корректный пароль
4. Нажать кнопку "Войти"

Ожидаемый результат: Отображается сообщение об ошибке "Учетная запись отключена", вход в систему не происходит.

### Проверка запоминания последней страницы перед входом

1. Перейти к защищенной странице приложения, не выполняя вход
2. Запомнить URL страницы
3. Выполнить вход с корректными учетными данными
4. Проверить, что пользователь перенаправлен на запомненную страницу

Ожидаемый результат: Пользователь перенаправляется на страницу, которую пытался открыть до входа в систему.

## 4. Тест-кейсы для процесса выхода из системы

### Успешный выход из системы

1. Выполнить вход в систему с корректными учетными данными
2. Найти и нажать кнопку/ссылку выхода из системы
3. Подтвердить выход, если требуется

Ожидаемый результат: Пользователь успешно выходит из системы, токены аутентификации удаляются, пользователь перенаправляется на страницу входа.

### Проверка недоступности защищенных страниц после выхода

1. Выполнить вход в систему
2. Перейти на защищенную страницу
3. Выполнить выход из системы
4. Попытаться получить доступ к защищенной странице через URL

Ожидаемый результат: Пользователь перенаправляется на страницу входа, доступ к защищенной странице закрыт.

### Проверка невозможности использования старых токенов

1. Выполнить вход в систему
2. Запомнить токен аутентификации
3. Выполнить выход из системы
4. Попытаться использовать запомненный токен для доступа к API

Ожидаемый результат: Запрос отклоняется с ошибкой аутентификации (401 Unauthorized).

## 5. Дополнительные проверки

### Поведение при обновлении страницы после входа

1. Выполнить вход в систему
2. Обновить страницу (F5 или Ctrl+R)

Ожидаемый результат: Пользователь остается в системе, сессия сохраняется.

### Поведение при открытии нескольких вкладок

1. Выполнить вход в систему
2. Открыть новую вкладку браузера
3. Перейти к защищенной странице в новой вкладке

Ожидаемый результат: Пользователь автоматически аутентифицирован во всех вкладках.

### Поведение при истечении срока действия токена

1. Выполнить вход в систему
2. Дождаться истечения срока действия токена (или симулировать это)
3. Попытаться выполнить действие, требующее аутентификации

Ожидаемый результат: Система автоматически обновляет токен или перенаправляет на страницу входа.

## 6. Ожидаемые результаты

Для каждого тест-кейса ожидаемые результаты описаны в соответствующих разделах выше. В случае успешного выполнения всех тестов система должна корректно обрабатывать все сценарии аутентификации и обеспечивать безопасность доступа к защищенным ресурсам.

## 7. Рекомендации по тестированию

### Советы по проведению тестирования

1. Используйте различные браузеры для проверки кросс-браузерной совместимости
2. Проверяйте поведение при медленном интернет-соединении
3. Тестируйте сценарии с включенным и отключенным JavaScript
4. Проверяйте работу cookies и localStorage в браузере
5. Используйте инструменты разработчика браузера для мониторинга сетевых запросов

### Возможные проблемы и способы их обхода

1. Проблемы с кэшированием: Очищайте кэш браузера перед тестированием
2. Проблемы с cookies: Удаляйте cookies для домена приложения перед тестированием
3. Проблемы с токенами: Используйте приватное окно браузера для тестирования
4. Проблемы с перенаправлением: Проверяйте параметры URL после входа
